<div class="doctor-edit-container">
  <div class="edit-profile-card">
    <!-- Header Section -->
    <div class="profile-header">
      <div class="header-gradient"></div>
      <div class="header-content">
        <i class="fas fa-user-md profile-icon"></i>
        <h2 class="profile-title">تحديث الملف الشخصي</h2>
        <p class="profile-subtitle">قم بتحديث معلوماتك للحفاظ على بياناتك حديثة</p>
      </div>
    </div>

    <!-- Main Form Content -->
    <div class="profile-body">
      <!-- Success Message -->
      @if (successMessage) {
        <div class="success-message">
          <i class="fas fa-check-circle"></i>
          <span>{{ successMessage }}</span>
        </div>
      }

      <form [formGroup]="editForm" (ngSubmit)="onSubmit()" class="edit-form">
        <!-- Personal Information Section -->
        <div class="form-section">
          <div class="section-header">
            <div class="section-icon">
              <i class="fas fa-id-card"></i>
            </div>
            <h3 class="section-title">المعلومات الشخصية</h3>
            <div class="section-divider"></div>
          </div>

          <div class="form-grid">
            <!-- First Name -->
            <div class="form-group floating">
              <input
                type="text"
                id="fName"
                formControlName="fName"
                class="form-input"
                [class.invalid]="editForm.get('fName')?.invalid && editForm.get('fName')?.touched"
                placeholder=" "
              >
              <label for="fName" class="form-label">الاسم الأول</label>
              @if (editForm.get('fName')?.touched && editForm.get('fName')?.invalid) {
                <div class="form-error">
                  @if (editForm.get('fName')?.errors?.['required']) {
                    <span><i class="fas fa-exclamation-circle"></i> الاسم الأول مطلوب</span>
                  }
                  @if (editForm.get('fName')?.errors?.['pattern']) {
                    <span><i class="fas fa-exclamation-circle"></i> يجب أن يحتوي على حروف فقط</span>
                  }
                </div>
              }
            </div>
            
            <!-- Last Name -->
            <div class="form-group floating">
              <input
                type="text"
                id="lName"
                formControlName="lName"
                class="form-input"
                [class.invalid]="editForm.get('lName')?.invalid && editForm.get('lName')?.touched"
                placeholder=" "
              >
              <label for="lName" class="form-label">الاسم الأخير</label>
              @if (editForm.get('lName')?.touched && editForm.get('lName')?.invalid) {
                <div class="form-error">
                  @if (editForm.get('lName')?.errors?.['required']) {
                    <span><i class="fas fa-exclamation-circle"></i> الاسم الأخير مطلوب</span>
                  }
                  @if (editForm.get('lName')?.errors?.['pattern']) {
                    <span><i class="fas fa-exclamation-circle"></i> يجب أن يحتوي على حروف فقط</span>
                  }
                </div>
              }
            </div>
          </div>
        </div>

        <!-- Address Section -->
        <div class="form-section">
          <div class="section-header">
            <div class="section-icon">
              <i class="fas fa-map-marker-alt"></i>
            </div>
            <h3 class="section-title">معلومات العنوان</h3>
            <div class="section-divider"></div>
          </div>

          <div class="form-grid">
            <!-- City -->
            <div class="form-group floating">
              <input
                type="text"
                id="city"
                formControlName="city"
                class="form-input"
                [class.invalid]="editForm.get('city')?.invalid && editForm.get('city')?.touched"
                placeholder=" "
              >
              <label for="city" class="form-label">المدينة</label>
              @if (editForm.get('city')?.touched && editForm.get('city')?.invalid) {
                <div class="form-error">
                  <span><i class="fas fa-exclamation-circle"></i> المدينة مطلوبة</span>
                </div>
              }
            </div>
            
            <!-- Country -->
            <div class="form-group floating">
              <input
                type="text"
                id="country"
                formControlName="country"
                class="form-input"
                readonly
                placeholder=" "
              >
              <label for="country" class="form-label">الدولة</label>
            </div>
            
            <!-- Street -->
            <div class="form-group floating full-width">
              <input
                type="text"
                id="street"
                formControlName="street"
                class="form-input"
                [class.invalid]="editForm.get('street')?.invalid && editForm.get('street')?.touched"
                placeholder=" "
              >
              <label for="street" class="form-label">عنوان الشارع (المنطقة ورقم العمارة)</label>
              @if (editForm.get('street')?.touched && editForm.get('street')?.invalid) {
                <div class="form-error">
                  @if (editForm.get('street')?.errors?.['required']) {
                    <span><i class="fas fa-exclamation-circle"></i> عنوان الشارع مطلوب</span>
                  }
                  @if (editForm.get('street')?.errors?.['pattern']) {
                    <span><i class="fas fa-exclamation-circle"></i> يجب أن يحتوي على اسم المنطقة ورقم العمارة</span>
                  }
                </div>
              }
            </div>
          </div>
        </div>

        <!-- Professional Information -->
        <div class="form-section">
          <div class="section-header">
            <div class="section-icon">
              <i class="fas fa-briefcase-medical"></i>
            </div>
            <h3 class="section-title">المعلومات المهنية</h3>
            <div class="section-divider"></div>
          </div>

          <div class="form-grid">
            <!-- Booking Price -->
            <div class="form-group floating with-currency">
              <input
                type="number"
                id="bookingPrice"
                formControlName="bookingPrice"
                class="form-input"
                [class.invalid]="editForm.get('bookingPrice')?.invalid && editForm.get('bookingPrice')?.touched"
                placeholder=" "
              >
              <label for="bookingPrice" class="form-label">سعر الكشف</label>
              <span class="currency">ج.م</span>
              @if (editForm.get('bookingPrice')?.touched && editForm.get('bookingPrice')?.invalid) {
                <div class="form-error">
                  <span><i class="fas fa-exclamation-circle"></i> سعر الكشف مطلوب</span>
                </div>
              }
            </div>
          </div>
        </div>

        <!-- Form Actions -->
        <div class="form-actions">
          <button
            type="button"
            class="btn btn-back"
            (click)="_Router.navigate(['/doctor/profile'])"
          >
            <i class="fas fa-arrow-right"></i>
            <span>العودة للصفحة السابقة</span>
          </button>

          
          <button
            type="submit"
            class="btn btn-save"
            [disabled]="editForm.invalid || loading"
          >
            @if (loading) {
              <i class="fas fa-spinner fa-spin"></i>
            } @else {
              <i class="fas fa-save"></i>
              <span>حفظ التغييرات</span>
            }
          </button>
        </div>
      </form>
    </div>

    <!-- Error Message -->
    @if (error) {
      <div class="error-message">
        <i class="fas fa-exclamation-triangle"></i>
        <span>{{ error }}</span>
      </div>
    }
  </div>
</div>